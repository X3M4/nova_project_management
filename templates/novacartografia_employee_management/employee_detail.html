{% extends "base.html" %}

{% block title %}{{ employee.name }} - Employee Details{% endblock %}

{% block content %}
<div class="mb-6 flex justify-between items-center">
    <h2 class="text-2xl font-bold text-gray-800">Employee Details</h2>
    <div class="flex space-x-2">
        <a href="{% url 'kanban_board' %}" class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium py-2 px-4 rounded flex items-center">
            <i class="fas fa-arrow-left mr-2"></i> Back to List
        </a>
        <a href="{% url 'employee_update' employee.id %}" class="bg-yellow-500 hover:bg-yellow-600 text-white font-medium py-2 px-4 rounded flex items-center">
            <i class="fas fa-edit mr-2"></i> Edit
        </a>
        <a href="{% url 'employee_delete' employee.id %}" class="bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded flex items-center">
            <i class="fas fa-trash mr-2"></i> Delete
        </a>
    </div>
</div>

<div class="bg-white shadow overflow-hidden sm:rounded-lg">
    <div class="px-4 py-5 sm:px-6 bg-primary-600">
        <h3 class="text-lg leading-6 font-medium text-white">{{ employee.name }}</h3>
        <p class="mt-1 max-w-2xl text-sm text-primary-100">Employee Information</p>
    </div>
    
    <div class="border-t border-gray-200">
        <dl>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Full name</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{ employee.name }}</dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Job title</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{ employee.job }}</dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">State</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{ employee.get_state_display }}</dd>
            </div>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Current project</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">
                    {% if employee.project_id %}
                        <a href="{% url 'project_detail' employee.project_id.id %}" class="text-primary-600 hover:text-primary-800">
                            {{ employee.project_id.name }}
                        </a>
                    {% else %}
                        <span class="text-gray-500 italic">No project assigned</span>
                    {% endif %}
                </dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Employee ID</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">{{ employee.id }}</dd>
            </div>
        </dl>
    </div>
</div>

{% if movements %}
<div class="mt-8">
    <h3 class="text-lg font-medium text-gray-800 mb-4">Project Movement History</h3>
    <div class="bg-white shadow overflow-hidden sm:rounded-lg">
        <ul class="divide-y divide-gray-200">
            {% for movement in movements %}
            <li class="px-4 py-4 sm:px-6">
                <div class="flex items-center">
                    <div class="min-w-0 flex-1">
                        <p class="text-sm font-medium text-gray-900 truncate">
                            {% if movement.previous_project %}
                                Moved from <span class="font-semibold">{{ movement.previous_project.name }}</span> to 
                                <span class="font-semibold">{{ movement.project.name }}</span>
                            {% else %}
                                Assigned to <span class="font-semibold">{{ movement.project.name }}</span>
                            {% endif %}
                        </p>
                        <p class="text-sm text-gray-500">
                            {{ movement.date|date:"F j, Y, g:i a" }}
                        </p>
                    </div>
                </div>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endif %}
{% endblock %}